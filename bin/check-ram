#!/usr/bin/env zsh
# Check current RAM usage (no sudo required)

# Get memory stats
MEM_FREE=$(vm_stat | grep "Pages free" | awk '{print $3}' | tr -d '.')
MEM_INACTIVE=$(vm_stat | grep "Pages inactive" | awk '{print $3}' | tr -d '.')
MEM_ACTIVE=$(vm_stat | grep "Pages active" | awk '{print $3}' | tr -d '.')
MEM_WIRED=$(vm_stat | grep "Pages wired down" | awk '{print $4}' | tr -d '.')

# Convert pages to MB (1 page = 4096 bytes)
TOTAL_FREE=$(( (MEM_FREE + MEM_INACTIVE) * 4096 / 1024 / 1024 ))
TOTAL_ACTIVE=$(( MEM_ACTIVE * 4096 / 1024 / 1024 ))
TOTAL_WIRED=$(( MEM_WIRED * 4096 / 1024 / 1024 ))
TOTAL_USED=$(( TOTAL_ACTIVE + TOTAL_WIRED ))

# Get total memory
TOTAL_MEM=$(sysctl -n hw.memsize)
TOTAL_MEM_MB=$(( TOTAL_MEM / 1024 / 1024 ))

echo "ðŸ“Š RAM Status:"
echo "   Total: ${TOTAL_MEM_MB} MB"
echo "   Used:  ${TOTAL_USED} MB (Active: ${TOTAL_ACTIVE} MB, Wired: ${TOTAL_WIRED} MB)"
echo "   Free:  ${TOTAL_FREE} MB"
echo "   Usage: $(( (TOTAL_USED * 100) / TOTAL_MEM_MB ))%"

