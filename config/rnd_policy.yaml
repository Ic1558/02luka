version: 1
defaults:
  live: false           # global feature flag (Phase 5 starts dry-run)
  target_score: 85
  max_touch_files: 5
  max_diff_lines: 200
  allow_doc_only_auto: true
  allow_test_only_auto: true
  allow_ci_fix_auto: true
  allow_code_refactor_auto: false
risk_tiers:
  low:
    kinds: [docs, tests, ci, lint]
    auto_approve: true
    requires_review: false
  medium:
    kinds: [small_refactor, config, pipeline]
    auto_approve: false
    requires_review: true
  high:
    kinds: [core_logic, security, finance]
    auto_approve: false
    requires_review: true
guards:
  - name: "touch-limit"
    rule: "changed_files <= defaults.max_touch_files"
  - name: "diff-limit"
    rule: "diff_lines <= defaults.max_diff_lines"
  - name: "no-secrets"
    rule: "secrets_found == 0"
  - name: "tests-green-if-modified"
    rule: "tests_touched ? tests_green : true"
