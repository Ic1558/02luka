#!/usr/bin/env bash
#
# Example Post-Validate Hook
# Runs after all validation completes
#
# Arguments:
#   $1 = Total validators
#   $2 = Passed validators
#   $3 = Failed validators
#
# To use: cp post_validate.sh.example post_validate.sh && chmod +x post_validate.sh

set -euo pipefail

TOTAL="$1"
PASSED="$2"
FAILED="$3"

SUCCESS_RATE=$((PASSED * 100 / TOTAL))

echo ""
echo "ðŸ“Š Validation Complete"
echo "   Success Rate: ${SUCCESS_RATE}%"
echo ""

# Example: Generate summary report
SUMMARY_FILE="/tmp/validation-summary-$(date +%Y%m%d).md"

cat > "$SUMMARY_FILE" <<EOF
# Validation Summary

**Date**: $(date -Iseconds)

## Results

- **Total Validators**: $TOTAL
- **Passed**: $PASSED
- **Failed**: $FAILED
- **Success Rate**: ${SUCCESS_RATE}%

## Status

$(if (( FAILED == 0 )); then
  echo "âœ… All validators passed!"
else
  echo "âŒ Some validators failed. Review logs for details."
fi)

---
*Generated by Global Validation System*
EOF

echo "ðŸ“„ Summary saved to: $SUMMARY_FILE"

# Example: Cleanup temp files
rm -f /tmp/failed-validators.txt 2>/dev/null || true

exit 0
