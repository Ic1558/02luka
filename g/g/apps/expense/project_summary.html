<!doctype html><meta charset="utf-8"><title>Project Summary</title>
<style>body{font-family:system-ui;margin:24px}table{border-collapse:collapse;width:100%}th,td{padding:8px;border-bottom:1px solid #eee}th{background:#fafafa}</style>
<h2>Project Summary</h2>
<p>Load a ledger JSONL and see totals per project.</p>
<input id="file" type="file" accept=".jsonl" />
<table><thead><tr><th>Project</th><th>Total Amount</th><th>Total VAT</th><th>Count</th></tr></thead><tbody id="tb"></tbody></table>
<script>
const $=s=>document.querySelector(s);
$("#file").addEventListener("change", async e=>{
  const txt = await e.target.files[0].text();
  const rows = txt.trim()===""?[]:txt.split(/\n+/).map(JSON.parse);
  const agg={}; for(const r of rows){ const k=r.project||"(none)"; (agg[k]??={amt:0,vat:0,c:0});
    agg[k].amt+=(+r.amount||0); agg[k].vat+=(+r.vat||0); agg[k].c++; }
  $("#tb").innerHTML = Object.entries(agg).map(([p,a])=>`<tr><td>${p}</td><td>${a.amt.toLocaleString(undefined,{minimumFractionDigits:2})}</td><td>${a.vat.toLocaleString(undefined,{minimumFractionDigits:2})}</td><td>${a.c}</td></tr>`).join("");
});
</script>
