# Codex Routing Log (JSONL format)
# Purpose: Track Codex usage, measure CLC quota savings, validate quality
# Format: One JSON object per line (easy to parse, append-only)
# Usage: Append each task routed to Codex
#
# Schema:
# {
#   "timestamp": "ISO 8601 datetime",
#   "task_id": "unique task identifier",
#   "task_type": "code_review | refactor | test_gen | debug | analysis | other",
#   "zone": "locked | non-locked",
#   "engine": "codex | clc | gemini",
#   "command": "exact command used",
#   "duration_sec": number,
#   "success": boolean,
#   "quality_score": 1-10,
#   "prompts_triggered": number,
#   "clc_quota_saved": boolean,
#   "notes": "optional notes"
# }
#
# Example entries:
{"timestamp":"2025-12-30T02:50:00Z","task_id":"test-001","task_type":"code_review","zone":"non-locked","engine":"codex","command":"codex-system 'review tools/session_save.zsh'","duration_sec":203,"success":true,"quality_score":9,"prompts_triggered":0,"clc_quota_saved":true,"notes":"First production test - excellent findings"}
{"timestamp":"2025-12-30T03:10:00Z","task_id":"issue-001-git-add-fix","task_type":"security_fix","zone":"non-locked","engine":"clc","command":"fix git add -A in tools/session_save.zsh","duration_sec":600,"success":true,"quality_score":10,"prompts_triggered":0,"clc_quota_saved":false,"notes":"Issue #1 High severity - Fixed by CLC (Codex TTY limitation). Replaced git add -A with explicit file list. Commit: d298b70e"}
{"timestamp":"2025-12-29T20:27:36Z","task_id":"task-20251230-032736","task_type":"reliability_improvement","zone":"non-locked","engine":"codex","command":"codex-task add jq check","duration_sec":0,"success":true,"quality_score":9,"prompts_triggered":0,"clc_quota_saved":true,"notes":""}
{"timestamp":"2025-12-29T20:47:00Z","task_id":"issue-002-json-escaping-fix","task_type":"security_fix","zone":"non-locked","engine":"clc","command":"fix JSON escaping in tools/session_save.zsh","duration_sec":900,"success":true,"quality_score":10,"prompts_triggered":0,"clc_quota_saved":false,"notes":"Issue #2 Medium severity - Fixed by CLC (Codex TTY limitation). Replaced printf with jq -nc for safe JSON. Commit: 13c42703"}
{"timestamp":"2025-12-29T20:50:00Z","task_id":"issue-004-mls-capture-validation","task_type":"testing","zone":"non-locked","engine":"clc","command":"validate mls_capture.zsh error handling","duration_sec":2400,"success":true,"quality_score":9,"prompts_triggered":0,"clc_quota_saved":false,"notes":"Issue #4 Medium severity - Applied by Codex earlier, validated by CLC manual testing. 9/9 improvements tested, 100% pass rate. Critical test: corrupted index recovery working."}
{"timestamp":"2025-12-30T21:00:00Z","task_id":"week1-task-1.1-mls-search","task_type":"reliability_improvement","zone":"non-locked","engine":"codex","command":"codex-task create mls_search.zsh with jq check","duration_sec":201,"success":true,"quality_score":9,"prompts_triggered":0,"clc_quota_saved":true,"notes":"Week 1 Task 1.1 - Created NEW tools/mls_search.zsh (better than modifying). jq check, keyword/type filters, working. Sanity checks passed."}
{"timestamp":"2025-12-30T21:03:00Z","task_id":"week1-task-3.2-codex-quickref","task_type":"documentation","zone":"non-locked","engine":"codex","command":"codex-task create codex quick reference","duration_sec":201,"success":true,"quality_score":9,"prompts_triggered":0,"clc_quota_saved":true,"notes":"Week 1 Task 3.2 - Created g/manuals/codex_quick_reference.md. 5 sections, 29 lines, concise and actionable. Production-ready."}
