# Reality Snapshot Dashboard View — Feature (2025-11-15)

## Summary

Adds a **Reality Snapshot** tab to the dashboard that visualizes the latest
`reality_hooks_snapshot_*.json` generated by the Reality Hooks CI aggregator.
This is a read-only view and does not change any server behavior or CI
workflows.

## Files

- `g/apps/dashboard/api_server.py`
  - Adds `GET /api/reality/snapshot`:
    - Locates latest `reality_hooks_snapshot_*.json` under
      `g/reports/system/`.
    - Returns:
      - `status: "no_snapshot"` if none found.
      - `status: "error"` if snapshot is invalid.
      - `status: "ok"`, `snapshot_path`, and `data` when successful.

- `apps/dashboard/wo_dashboard_server.js`
  - Adds the same `GET /api/reality/snapshot` endpoint for the Node-based dashboard server.
  - Looks in `g/reports/system/`, `reports/system/`, and the logs parent
    directory for the newest `reality_hooks_snapshot_*.json` file (using
    modification time).

- `apps/dashboard/index.html` **and** `g/apps/dashboard/index.html`
  - New `Reality` tab / nav link (`#tab-reality` / `#reality-panel`).
  - New Reality section with:
    - Metadata block: `#reality-meta`
    - Deployment panel: `#reality-deployment`
    - save.sh runs table: `#reality-save-body`
    - Orchestrator panel: `#reality-orchestrator`

- `apps/dashboard/dashboard.js` **and** `g/apps/dashboard/dashboard.js`
  - Adds:
    - `loadRealitySnapshot()`
    - `renderRealitySnapshot(payload)` (plus error handling in the g/ variant)
  - Hooks:
    - `tab-reality` → shows `view-reality` and triggers `loadRealitySnapshot()` in the static dashboard.
    - `refreshAllData()` now pulls the snapshot inside the g/ dashboard to keep data current.

## Behavior

- When **Reality** tab is clicked:
  - Calls `/api/reality/snapshot`.
  - If no snapshot:
    - Shows a notice: "No Reality Hooks snapshot found yet."
  - If snapshot present:
    - Shows:
      - Latest deployment report path.
      - Recent `save_sh_full_cycle` runs (lane + layers + git status).
      - Raw orchestrator summary JSON.

## Risk

- Read-only:
  - No writes to state.
  - No changes to signature verification or WO flows.
- Backend change is limited to a single new `GET` endpoint.

Risk level: **Low**.

## Checklist

- [ ] `Reality` tab appears in the dashboard.
- [ ] Clicking it calls `/api/reality/snapshot`.
- [ ] With a snapshot present:
  - [ ] Deployment path is shown.
  - [ ] save.sh table populated with recent runs.
  - [ ] Orchestrator JSON is rendered.
- [ ] With no snapshot, user sees "No Reality Hooks snapshot found yet."
