#!/usr/bin/env bash
# Phase 21 PR Creation Helper
# Generates links and commands for creating all three Phase 21 PRs

set -euo pipefail

cat <<'BANNER'
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘            Phase 21: Hub Infrastructure â€” PR Creator              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
BANNER

SID="011CUvQ8F4cVZPzH4rT1a1cM"
REPO_BASE="https://github.com/Ic1558/02luka"

echo ""
echo "ðŸ“‹ Three PRs ready to create:"
echo ""

# Phase 21.1
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "1ï¸âƒ£  PHASE 21.1 â€” Hub Mini UI"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "Branch:  claude/phase-21-1-hub-mini-ui-${SID}"
echo "Title:   feat(phase-21.1): Hub Mini UI (static status & API shim)"
echo "URL:     ${REPO_BASE}/pull/new/claude/phase-21-1-hub-mini-ui-${SID}"
echo ""
echo "PR Body: .pr-templates/phase-21-1-hub-mini-ui.md"
echo ""
echo "Files:"
echo "  â€¢ hub/ui/index.html          â€” Dashboard HTML"
echo "  â€¢ hub/ui/app.js              â€” JSON fetcher"
echo "  â€¢ hub/ui/style.css           â€” Minimal styles"
echo "  â€¢ tools/hub_http.zsh         â€” Dev server (port 8080)"
echo "  â€¢ .github/workflows/hub-ui-check.yml â€” CI validation"
echo ""
echo "Quick Test:"
echo "  ./tools/hub_http.zsh"
echo "  open http://localhost:8080/ui/index.html"
echo ""

# Phase 21.2
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "2ï¸âƒ£  PHASE 21.2 â€” Memory Guard"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "Branch:  claude/phase-21-2-memory-guard-${SID}"
echo "Title:   feat(phase-21.2): Memory repo size/pattern guard"
echo "URL:     ${REPO_BASE}/pull/new/claude/phase-21-2-memory-guard-${SID}"
echo ""
echo "PR Body: .pr-templates/phase-21-2-memory-guard.md"
echo ""
echo "Files:"
echo "  â€¢ config/memory_guard.yaml   â€” Thresholds & patterns"
echo "  â€¢ config/schemas/memory_guard.schema.json â€” Validation schema"
echo "  â€¢ tools/check_memory_guard.zsh â€” Local enforcer"
echo "  â€¢ .github/workflows/memory-guard.yml â€” CI workflow"
echo ""
echo "Quick Test:"
echo "  LUKA_MEM_REPO_ROOT=\"\$HOME/LocalProjects/02luka-memory\" ./tools/check_memory_guard.zsh"
echo ""

# Phase 21.3
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "3ï¸âƒ£  PHASE 21.3 â€” Protection Enforcer"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "Branch:  claude/phase-21-3-protection-enforcer-${SID}"
echo "Title:   feat(phase-21.3): Branch protection enforcer & PR comment"
echo "URL:     ${REPO_BASE}/pull/new/claude/phase-21-3-protection-enforcer-${SID}"
echo ""
echo "PR Body: .pr-templates/phase-21-3-protection-enforcer.md"
echo ""
echo "Files:"
echo "  â€¢ config/required_checks.json â€” Required job IDs"
echo "  â€¢ tools/required_checks_assert.mjs â€” Local validator"
echo "  â€¢ .github/workflows/protection-enforcer.yml â€” CI + auto-comment"
echo ""
echo "Quick Test:"
echo "  node tools/required_checks_assert.mjs"
echo ""

# Summary
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ðŸ“Š SUMMARY"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Total files:     12 files across 3 PRs"
echo "Total LOC:       ~269 lines"
echo "All branches:    Pushed âœ“"
echo "PR templates:    Ready in .pr-templates/"
echo ""
echo "ðŸš€ TO CREATE PRs:"
echo ""
echo "Option 1 (Web UI â€” Recommended):"
echo "  1. Click each URL above"
echo "  2. Copy content from corresponding .pr-templates/*.md file"
echo "  3. Paste into PR body"
echo "  4. Click 'Create pull request'"
echo ""
echo "Option 2 (Command Line):"
echo "  # Requires gh CLI and appropriate permissions"
echo "  gh pr create --title \"feat(phase-21.1): Hub Mini UI (static status & API shim)\" \\"
echo "    --body-file .pr-templates/phase-21-1-hub-mini-ui.md \\"
echo "    --head claude/phase-21-1-hub-mini-ui-${SID}"
echo ""
echo "  gh pr create --title \"feat(phase-21.2): Memory repo size/pattern guard\" \\"
echo "    --body-file .pr-templates/phase-21-2-memory-guard.md \\"
echo "    --head claude/phase-21-2-memory-guard-${SID}"
echo ""
echo "  gh pr create --title \"feat(phase-21.3): Branch protection enforcer & PR comment\" \\"
echo "    --body-file .pr-templates/phase-21-3-protection-enforcer.md \\"
echo "    --head claude/phase-21-3-protection-enforcer-${SID}"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "âœ¨ All Phase 21 infrastructure components ready for review!"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
