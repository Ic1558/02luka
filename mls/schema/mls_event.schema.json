{
  "title": "MLS Event",
  "type": "object",
  "required": ["ts","type","title","summary","source","author","confidence"],
  "properties": {
    "ts":       {"type":"string"},
    "type":     {"enum":["solution","failure","improvement","pattern","antipattern"]},
    "title":    {"type":"string","minLength":3},
    "summary":  {"type":"string","minLength":3},
    "source": {
      "type":"object",
      "required":["producer"],
      "properties":{
        "producer":{"enum":["cls","codex","clc","gemini"]},
        "context":{"enum":["ci","wo","local"],"nullable":true},
        "repo":{"type":"string","nullable":true},
        "run_id":{"type":"string","nullable":true},
        "workflow":{"type":"string","nullable":true},
        "sha":{"type":"string","nullable":true},
        "artifact":{"type":"string","nullable":true},
        "artifact_path":{"type":"string","nullable":true}
      },
      "additionalProperties": false
    },
    "links": {
      "type":"object",
      "properties":{
        "followup_id":{"type":["string","null"]},
        "wo_id":{"type":["string","null"]}
      },
      "additionalProperties": false
    },
    "tags": {"type":"array","items":{"type":"string"}},
    "author": {"type":"string"},
    "confidence": {"type":"number","minimum":0,"maximum":1}
  },
  "additionalProperties": false
}
