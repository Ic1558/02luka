# Cloudflare Workers Configuration for PD17 AI Formwork Calculator

name = "formwork-calculator-api"
main = "index.js"
compatibility_date = "2024-01-01"

# Account details (replace with your own)
account_id = "YOUR_CLOUDFLARE_ACCOUNT_ID"
workers_dev = true

# Routes for www.theedges.work
routes = [
  { pattern = "formwork-api.theedges.work/*", zone_name = "theedges.work" }
]

# Environment variables (set these in Cloudflare Dashboard > Workers > Settings)
[env.production]
vars = { ENVIRONMENT = "production" }

# KV Namespace for storing calculations
[[kv_namespaces]]
binding = "CALCULATIONS_KV"
id = "YOUR_KV_NAMESPACE_ID"
preview_id = "YOUR_PREVIEW_KV_NAMESPACE_ID"

# D1 Database (optional - alternative to KV)
# [[d1_databases]]
# binding = "DB"
# database_name = "formwork_calculations"
# database_id = "YOUR_D1_DATABASE_ID"

# Secrets (set using: wrangler secret put SECRET_NAME)
# - OPENROUTER_API_KEY
# - KIMI_API_KEY
# - GLM_API_KEY

[build]
command = ""
watch_dirs = ["."]

[limits]
cpu_ms = 50
