<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=yes"/>
  <meta name="description" content="02LUKA Hub Quicken â€“ Real-time hub monitoring dashboard"/>
  <meta name="theme-color" content="#0b0f19"/>
  <title>02LUKA â€“ Hub Quicken v2</title>
  <link rel="stylesheet" href="style.css"/>
  <link rel="manifest" href="manifest.json"/>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ“Š</text></svg>"/>
</head>
<body>
<div id="pull-refresh" class="pull-refresh">
  <div class="pull-refresh-icon">â†“</div>
</div>

<header class="bar" role="banner">
  <h1>Hub Quicken v2</h1>
  <div class="controls">
    <button id="toggle-theme" title="Toggle dark/light (Alt+T)" aria-label="Toggle theme">ðŸŒ“</button>
    <label class="control-group">
      <input id="autorefresh" type="checkbox" checked aria-label="Auto refresh"/>
      <span>auto</span>
      <select id="refresh-interval" aria-label="Refresh interval">
        <option value="5000">5s</option>
        <option value="10000" selected>10s</option>
        <option value="30000">30s</option>
        <option value="60000">1m</option>
      </select>
    </label>
    <div class="search-wrapper">
      <input id="search" type="search" placeholder="searchâ€¦ (Ctrl+K)" aria-label="Search"/>
      <button id="regex-toggle" title="Toggle regex search (Alt+R)" aria-label="Toggle regex" class="mini-btn">.*</button>
    </div>
    <button id="export" title="Export all data (Ctrl+E)" aria-label="Export data">ðŸ’¾ export</button>
    <button id="history" title="View history (Ctrl+H)" aria-label="View history">ðŸ“œ</button>
  </div>
</header>

<main class="grid" role="main">
  <section class="card" id="card-index">
    <div class="card-head">
      <h2>Hub Index</h2>
      <div class="card-actions">
        <span id="idx-badge" class="badge">â€”</span>
        <button class="mini-btn" data-copy="index-view" title="Copy" aria-label="Copy">ðŸ“‹</button>
        <button class="mini-btn" data-collapse="card-index" title="Collapse" aria-label="Collapse">âˆ’</button>
      </div>
    </div>
    <div class="card-body">
      <div class="loading" id="loading-index">
        <div class="spinner"></div>
      </div>
      <pre id="index-view" aria-live="polite">loadingâ€¦</pre>
    </div>
  </section>

  <section class="card" id="card-registry">
    <div class="card-head">
      <h2>MCP Registry</h2>
      <div class="card-actions">
        <span id="reg-badge" class="badge">â€”</span>
        <button class="mini-btn" data-copy="registry-view" title="Copy" aria-label="Copy">ðŸ“‹</button>
        <button class="mini-btn" data-collapse="card-registry" title="Collapse" aria-label="Collapse">âˆ’</button>
      </div>
    </div>
    <div class="card-body">
      <div class="loading" id="loading-registry">
        <div class="spinner"></div>
      </div>
      <pre id="registry-view" aria-live="polite">loadingâ€¦</pre>
    </div>
  </section>

  <section class="card" id="card-health">
    <div class="card-head">
      <h2>MCP Health</h2>
      <div class="card-actions">
        <span id="hlt-badge" class="badge">â€”</span>
        <button class="mini-btn" data-copy="health-view" title="Copy" aria-label="Copy">ðŸ“‹</button>
        <button class="mini-btn" data-collapse="card-health" title="Collapse" aria-label="Collapse">âˆ’</button>
      </div>
    </div>
    <div class="card-body">
      <div class="loading" id="loading-health">
        <div class="spinner"></div>
      </div>
      <pre id="health-view" aria-live="polite">loadingâ€¦</pre>
    </div>
  </section>

  <section class="card" id="card-diff">
    <div class="card-head">
      <h2>Diff (since last)</h2>
      <div class="card-actions">
        <span id="diff-badge" class="badge">â€”</span>
        <button class="mini-btn" data-copy="diff-view" title="Copy" aria-label="Copy">ðŸ“‹</button>
        <button class="mini-btn" data-collapse="card-diff" title="Collapse" aria-label="Collapse">âˆ’</button>
      </div>
    </div>
    <div class="card-body">
      <pre id="diff-view" aria-live="polite">no previous snapshot</pre>
    </div>
  </section>
</main>

<footer class="bar" role="contentinfo">
  <div>
    <a href="../../hub/index.json" target="_blank" rel="noopener">/hub/index.json</a> Â·
    <a href="../../hub/mcp_registry.json" target="_blank" rel="noopener">/hub/mcp_registry.json</a> Â·
    <a href="../../hub/mcp_health.json" target="_blank" rel="noopener">/hub/mcp_health.json</a>
  </div>
  <div class="footer-meta">
    <span id="last-update">â€”</span>
    <kbd title="Keyboard shortcuts">?</kbd>
  </div>
</footer>

<!-- Toast container -->
<div id="toast-container" aria-live="assertive" aria-atomic="true"></div>

<!-- History modal -->
<dialog id="history-modal" aria-labelledby="history-title">
  <div class="modal-header">
    <h2 id="history-title">Snapshot History</h2>
    <button class="close-modal" aria-label="Close">Ã—</button>
  </div>
  <div class="modal-body" id="history-list">
    <p>No snapshots yet</p>
  </div>
</dialog>

<!-- Keyboard shortcuts help -->
<dialog id="shortcuts-modal" aria-labelledby="shortcuts-title">
  <div class="modal-header">
    <h2 id="shortcuts-title">Keyboard Shortcuts</h2>
    <button class="close-modal" aria-label="Close">Ã—</button>
  </div>
  <div class="modal-body">
    <table>
      <tr><td><kbd>Ctrl</kbd>+<kbd>K</kbd></td><td>Focus search</td></tr>
      <tr><td><kbd>Ctrl</kbd>+<kbd>E</kbd></td><td>Export data</td></tr>
      <tr><td><kbd>Ctrl</kbd>+<kbd>H</kbd></td><td>View history</td></tr>
      <tr><td><kbd>Alt</kbd>+<kbd>T</kbd></td><td>Toggle theme</td></tr>
      <tr><td><kbd>Alt</kbd>+<kbd>R</kbd></td><td>Toggle regex search</td></tr>
      <tr><td><kbd>?</kbd></td><td>Show this help</td></tr>
      <tr><td><kbd>Esc</kbd></td><td>Close modals</td></tr>
    </table>
  </div>
</dialog>

<script src="app.js"></script>
</body>
</html>
